(in-package :drawer)

(let* ((bsvg (make-backend-svg))
       (bhtml (make-backend-html))
       (btikz (make-backend-tikz))
       (ax (make-scalar 100))
       (ay (make-scalar 50))
       (bx (make-scalar 800))
       (by (make-scalar 650))
       (p1 (make-point ax ay))
       (p2 (make-point bx by))
       (c0 (make-scalar 0))
       (cy (make-scalar 50))
       (dd (make-scalar 20))
       (o (make-point c0 c0))
       (dot (make-circle p1 cy))
       (delta (make-point c0 cy))
       (mini-delta (make-point dd c0))
       (diagonal (make-line p1 p2))
       (dots (make-obj-array dot 24 o p1 mini-delta))
       (double-line (make-group (list dot
                                      diagonal
                                      (cp diagonal o delta)
                                      (cp dot o delta))))
       (lsax (make-scalar 100))
       (lsay (make-scalar 100))
       (lsbx (make-scalar 300))
       (lsby (make-scalar 100))
       (lscx (make-scalar 350))
       (lscy (make-scalar 400))
       (lsdx (make-scalar 280))
       (lsdy (make-scalar 180))
       (lspa (make-point lsax lsay))
       (lspb (make-point lsbx lsby))
       (lspc (make-point lscx lscy))
       (lspd (make-point lsdx lsdy))
       (ls (make-line-strip (list lspa lspb lspc lspd)))
       (lns (ln-shape p1 '(10 50 -20 50 30 50 -20))))
  (draw-with-multiple-backends (list bsvg bhtml btikz) (list lns))
  (compile-tikz btikz)
  'done)
